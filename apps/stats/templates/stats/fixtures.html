{% extends 'base.html' %}
{% load filters %}

{% block title %} Fixtures & Results {% endblock %}

{% block content %}
    {% get_mufc as mufc %}

    <a class="accordion-toggle" data-toggle="collapse" data-parent="#fixtures-results" href="#results"
       onclick="history.pushState({'page':'results'}, 'results', '/results/');">
        <h1>Results</h1>
    </a>

    <div id="results" class="collapse{% ifequal request.path '/results/' %} show{% endifequal %}">
        <div class="results-table table-responsive">
            <table class="table auto-width table-centered">

                {% with mufc.get_crest.thumbnail.35x35  as mufc_crest %}

                    {% for fixture in results %}
                        <tr>
                            <td class="link-cell">
                                <a href="{{ fixture.get_absolute_url }}">
                                    <span class="date">{{ fixture.datetime|date:'d' }} {{ fixture.datetime|date:'F' }} {{ fixture.datetime|date:'Y' }}</span>

                                    <div class="time">{{ fixture.datetime|date:'P' }} NPT</div>
                                </a>
                            </td>
                            <td class="link-cell">
                                <a href="{{ fixture.get_absolute_url }}">
                                    {{ fixture.competition_year.competition }}
                                </a>
                            </td>
                            {% if fixture.is_home_game %}
                                <td class="text-center font-weight-bold">
                                    <a href="{{ fixture.get_absolute_url }}">
                                        <img src="{{ mufc_crest }}">
                                        <br/>
                                        United
                                    </a>
                                </td>
                                <td class="text-center font-weight-bold">
                                    <a href="{{ fixture.get_absolute_url }}">
                                        {{ fixture.mufc_score }} - {{ fixture.opponent_score }}
                                    </a>
                                </td>
                                <td class="text-center font-weight-bold">
                                    <a href="{{ fixture.get_absolute_url }}">
                                        <img src="{{ fixture.opponent.get_crest.thumbnail.35x35 }}">
                                        <br/>
                                        {{ fixture.opponent.name }}
                                    </a>
                                </td>
                            {% else %}
                                <td class="text-center font-weight-bold">
                                    <a href="{{ fixture.get_absolute_url }}">
                                        <img src="{{ fixture.opponent.get_crest.thumbnail.35x35 }}">
                                        <br/>
                                        {{ fixture.opponent.name }}
                                    </a>
                                </td>

                                <td class="text-center font-weight-bold">
                                    <a href="{{ fixture.get_absolute_url }}">
                                        {{ fixture.opponent_score }} - {{ fixture.mufc_score }}
                                    </a>
                                </td>
                                <td class="text-center font-weight-bold">
                                    <a href="{{ fixture.get_absolute_url }}">
                                        <img src="{{ mufc_crest }}">
                                        <br/>United
                                    </a>
                                </td>
                            {% endif %}

                            <td class="link-cell"><a href="{{ fixture.get_absolute_url }}">{{ fixture.venue }}</a></td>
                        </tr>
                    {% endfor %}
                {% endwith %}
            </table>
        </div>
    </div>


    <a data-toggle="collapse" data-parent="#fixtures-results" href="#fixtures"
       onclick="history.pushState({'page':'fixtures'}, 'fixtures', '/fixtures/');">
        <h1>Fixtures</h1>
    </a>

    <div id="fixtures" class="collapse{% ifequal request.path '/fixtures/' %} show{% endifequal %}">

        <div class="fixtures-table table-responsive">
            <table class="table auto-width table-centered">
                {% with mufc.get_crest.thumbnail.35x35  as mufc_crest %}
                    {% for fixture in fixtures %}
                        <tr>
                            <td class="link-cell">
                                <a href="{{ fixture.get_absolute_url }}">
                                    <span class="date">{{ fixture.datetime|date:'d' }} {{ fixture.datetime|date:'F' }} {{ fixture.datetime|date:'Y' }}</span>

                                    <div class="time">{{ fixture.datetime|date:'P' }} NPT</div>
                                </a>
                            </td>
                            <td class="link-cell"><a href="{{ fixture.get_absolute_url }}">
                                {{ fixture.competition_year.competition }}
                            </a></td>

                            {% if fixture.is_home_game %}
                                <td class="text-center font-weight-bold">
                                    <a href="{{ fixture.get_absolute_url }}">
                                        <img src="{{ mufc_crest.url }}" alt="MUFC">
                                        <br/>
                                        United
                                    </a>
                                </td>
                                <td class="text-center font-weight-bold">
                                    <a href="{{ fixture.get_absolute_url }}">
                                        vs
                                    </a>
                                </td>
                                <td class="text-center font-weight-bold">
                                    <a href="{{ fixture.get_absolute_url }}">
                                        <img src="{{ fixture.opponent.get_crest.thumbnail.35x35 }}"
                                             alt="{{ fixture.opponent.short_name }}"><br/>
                                        {{ fixture.opponent.name }}
                                    </a>
                                </td>
                            {% else %}
                                <td class="text-center font-weight-bold">
                                    <a href="{{ fixture.get_absolute_url }}">
                                        <img src="{{ fixture.opponent.get_crest.thumbnail.35x35 }}"
                                             alt="{{ fixture.opponent.short_name }}"><br/>
                                        {{ fixture.opponent.name }}
                                    </a>
                                </td>
                                <td class="text-center font-weight-bold">
                                    <a href="{{ fixture.get_absolute_url }}">
                                        vs
                                    </a>
                                </td>
                                <td class="text-center font-weight-bold">
                                    <a href="{{ fixture.get_absolute_url }}">
                                        <img src="{{ mufc_crest.url }}">
                                        <br/>United
                                    </a>
                                </td>
                            {% endif %}

                            <td class="link-cell"><a href="{{ fixture.get_absolute_url }}">{{ fixture.venue }}</a>
                            </td>
                        </tr>
                    {% endfor %}
                {% endwith %}
            </table>
        </div>

    </div>

{% endblock %}